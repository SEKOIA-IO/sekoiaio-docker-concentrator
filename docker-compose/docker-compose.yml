version: "3.9"
services:
  rsyslog:
    image: ghcr.io/sekoia-io/sekoiaio-docker-concentrator:2.1
    environment:
      - MEMORY_MESSAGES=2000000
      - DISK_SPACE=180g
      - RSYSLOG_DEBUGLOG=/var/log/rsyslog-debug.log
      - RSYSLOG_DEBUG=Debug NoStdOut
    ports:
      - "20516-20566:20516-20566"
      - "20516-20566:20516-20566/udp"
    volumes:
      - ./intakes.yaml:/intakes.yaml
      - ./conf:/etc/rsyslog.d
      - ./disk_queue:/var/spool/rsyslog
      - ./logs:/var/log
    restart: always
    pull_policy: always